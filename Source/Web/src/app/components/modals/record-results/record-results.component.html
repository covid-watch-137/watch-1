<h1 class="modal__title">Record Results</h1>
<div class="divider modal__divider"></div>
<h2 class="center marBottom32">{{patient?.user.first_name}} {{patient?.user.last_name}}</h2>
<div class="flex">
  <div class="flex1 marRight24">
    <label>Date</label>
    <div class="datepicker">
      <div class="datepicker__date" (click)="showDate=!showDate">
        <span *ngIf="!date">Select Date</span>
        <span *ngIf="date">{{date.format('ddd, MMM D')}}</span>
      </div>
      <app-date-picker class="datepicker__picker" [ngClass]="{ 'isOpen' : showDate }" [selected]="date" (selectedChange)="setSelectedDay($event)"></app-date-picker>
    </div>
  </div>
  <div class="flex1">
    <label>Care Plan</label>
    {{carePlan.plan_template.name}}
  </div>
</div> <!--/.flex (for date, type, care plan)-->

<div class="divider"></div>
<div class="flex marBottom32">
  <div class="flex1 marRight24">
    <label>Task</label>
    <p *ngIf="taskEditable">Task One</p>
    <div class="styledSelect">
      <select class="styledSelect__select" [(ngModel)]="task">
        <option *ngFor="let task of tasks" [ngValue]="task.id">{{task.name}}</option>
      </select>
    </div>
  </div>
  <div class="flex1">
    <label>Time Spent</label>
    <div class="flex alignCenter">
      <input type="number" min="0" class="input marRight8" [(ngModel)]="totalMinutes" />
      <div>min</div>
    </div>
  </div>
</div>
<div class="flex marBottom32 alignEnd">
  <!--TODO: Only show the following div if the modal is triggered from the patient details page-->
  <div class="flex1 marRight24">
    <label>With</label>
    <div class="styledSelect">
      <select class="styledSelect__select" [(ngModel)]="with">
        <option *ngFor="let employee of teamMembers" [ngValue]="employee.id">{{employee.first_name}} {{employee.last_name}}, {{employee.title}}</option>
      </select>
    </div>
  </div>
  <div class="flex1">
    <label class="styledInput">
      <div class="tool">
        <div class="tool__anchor">
          <div class="tool__tip tool__tip--right" [ngClass]="{ 'isOpen' : tooltipRRM1Open }">
            <div class="tool__text">
              If this box is checked, this information will be added to the EHR system.
            </div>
          </div>
        </div>
      </div>
      <input type="checkbox" class="styledInput__input" />
      <span class="styledInput__box"></span> Sync to EHR
        <button class="button button--icon button--icon--small"
        (click)="tooltipRRM1Open=!tooltipRRM1Open">
          <i class="ss-help"></i>
      </button>
    </label>
  </div>
</div> <!--/.flex for task/action, time spent, and sync to EHR-->

<!--TODO: Show the following div if the modal was triggered from the patient history page-->
<div class="divider" *ngIf=""></div>
<div *ngIf="" class="flex1 marRight24">
  <label>Action</label>
  <div class="styledSelect">
    <select class="styledSelect__select">
      <option>Patient Call</option>
      <option>Patient Email</option>
      <option>Patient Message</option>
    </select>
  </div>
</div>

<label>Notes (opt)</label>
<textarea class="input input--textarea" [(ngModel)]="notes"></textarea>

<div class="divider"></div>
<label>Patient Engagement</label>
<div class="center">
  <p>How engaged was the patient during the call?</p>
  <div class="scale">
    <div class="scale__hints">
      <h5 class="noMargin">1 (Not Engaged)</h5>
      <h5 class="noMargin">5 (Very Engaged)</h5>
    </div>
    <div class="scale__numbers">
      <label class="scale__label">
        <input type="radio" class="scale__input" name="scale1" (click)="setPatientEngagement(1)" />
        <div class="scale__number">
          1
        </div>
      </label>
      <label class="scale__label">
        <input type="radio" class="scale__input" name="scale1" (click)="setPatientEngagement(2)" />
        <div class="scale__number scale__number--2">
          2
        </div>
      </label>
      <label class="scale__label">
        <input type="radio" class="scale__input" name="scale1" (click)="setPatientEngagement(3)" />
        <div class="scale__number scale__number--3">
          3
        </div>
      </label>
      <label class="scale__label">
        <input type="radio" class="scale__input" name="scale1" (click)="setPatientEngagement(4)" />
        <div class="scale__number scale__number--4">
          4
        </div>
      </label>
      <label class="scale__label">
        <input type="radio" class="scale__input" name="scale1" (click)="setPatientEngagement(5)" />
        <div class="scale__number scale__number--5">
          5
        </div>
      </label>
    </div>
  </div> <!--/.scale-->
</div>

<div class="modal__buttons">
  <button class="button button--2nd" (click)="clickClose()">
    Cancel
  </button>
  <button class="button" [disabled]="saveDisabled()" (click)="clickSave()">
    Save
  </button>
</div>
