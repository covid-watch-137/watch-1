<h1 class="modal__title">Add Vital Report</h1>
<!--TODO: If adding the vital to a care plan template, show the following.-->
<div *ngIf="editingTemplate && totalPatients > 0" class="marCenter marCenter--twoThirds">
  <div class="iconText iconText--wrap iconText--autoHeight error marBottom32">
    <i class="iconText__icon ss-alert"></i>
    <span class="error__text">
      Making changes here will affect {{totalPatients}} patients currently assigned to this care plan.
    </span>
  </div>
</div>
<!--TODO: If adding the vital to a care plan instance, show the following-->
<h5 class="center" *ngIf="!editingTemplate">NOTE: You are adding a vital to one patient's care plan. To add a vital for everyone, go to care plans.</h5>

<div class="grid2col">
  <div class="gridCell--11 marRight32">
    <input type="text" class="input input--search fullWidth marBottom32" placeholder="Search Vitals" [(ngModel)]="searchInput" (ngModelChange)="filterVitals()" />
    <div class="listBox">
      <ul class="nameList">
        <li class="nameList__item nameList__item--padLeft nameList__item--target" [ngClass]="{'nameList__item--target--active':vitalTemplatePreview.vital == vital}" *ngFor="let vital of vitalTemplatesShown" (click)="showVitalPreview(vital)">
          <div class="flex alignCenter justifySpaceBetween fullWidth">
            <div class="flex alignCenter">
              <span class="ellipsis marRight16">{{vital.name}}</span>
              <i class="iconSmall ss-transfer"></i>
            </div>
            <div class="flex">
              <button class="button button--icon button--icon--small" (click)="editVitalTemplate($event, vital)">
                <i class="ss-write"></i>
              </button>
              <button class="button button--icon button--icon--small" (click)="deleteVitalTemplate($event, vital)">
                <i class="ss-delete"></i>
              </button>
            </div>
          </div>
        </li>
      </ul>
    </div> <!--/.listBox-->

    <button *ngIf="!createVital" class="button button--iconText" (click)="createVital=!createVital">
    	<i class="ss-plus"></i> Create New Vital
    </button>
    <form *ngIf="createVital" class="nameList__form">
    	<div class="nameList__inputWrap">
    		<input type="text" class="input fullWidth" [(ngModel)]="newVitalName" [ngModelOptions]="{standalone: true}" />
    	</div>
    	<div class="flex">
    		<button class="button button--icon button--icon--small" type="button" (click)="createVital=!createVital;">
    			<i class="ss-undo"></i>
    		</button>
    		<button class="button button--icon button--icon--small" (click)="createNewVital()">
    			<i class="ss-plus"></i>
    		</button>
    	</div>
    </form>

    <div class="modal__buttons modal__buttons--full">
      <button class="button button--2nd" (click)="close()">
        Cancel
      </button>
      <button class="button" [disabled]="!vitalTemplatePreview.vital" (click)="editVitalTemplate($event, vitalTemplatePreview.vital)">
        Next
      </button>
    </div>
  </div> <!--/.gridCell--11-->

  <div class="gridCell--21">
    <div class="modal__details">
      <!--TODO: Show the following if no vital is selected-->
      <h2 *ngIf="!vitalTemplatePreview.vital" class="modal__empty">Select a vital report to see details</h2>

      <!--TODO: Show the following div when a vital is selected-->
      <div *ngIf="vitalTemplatePreview.vital">
        <div class="flex alignCenter justifySpaceBetween marBottom8">
          <div class="flex alignCenter">
            <h2 class="ellipsisHeader noMargin marRight16">{{vitalTemplatePreview.vital.name}}</h2>
            <i class="iconSmall ss-transfer"></i>
          </div>
          <button class="button button--icon" (click)="openFullPreview(vitalTemplatePreview.vital)">
            <i class="ss-standard ss-view"></i>
          </button>
        </div>
        <h5 class="marBottom32">Note: Each vital report includes an optional notes field (not shown here) for the patient to provide feedback.</h5>
        <label>Instructions</label>
        <p class="marBottom24">
          When you get up in the morning, record the time you went to bed, and the time you got up, as well as the number of times you awoke during the night.
        </p>
        <div class="fullWidth">
          <table class="fullWidth">
            <thead>
              <tr>
                <th class="left">Metric</th>
                <th class="left">Type</th>
              </tr>
            </thead>
            <tbody class="fullWidth">
              <tr *ngFor="let vp of vitalTemplatePreview.vitals">
                <td class="left">{{vp.prompt |titlecase}}</td>
                <td class="left">{{vp.answer_type|titlecase}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div> <!--/.modal__details-->
  </div> <!--/.gridCell-21-->
</div> <!--/.grid2col-->
