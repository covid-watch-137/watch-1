<h1 class="modal__title">
  <!--TODO: Show the following span if adding a medication-->
  <!--<span>Add</span>-->
  <!--TODO: Show the following span if editing a medication-->
  <span>Edit</span>
  Medication
</h1>
<!--TODO: Show the following if editing a medication tied to a medication task-->
<div class="iconText iconText--wrap iconText--autoHeight error marBottom32">
  <i class="iconText__icon ss-alert"></i>
  <span class="error__text">
    This medication is linked to a medication task. Changing it may affect this patient's care&nbsp;plan.
  </span>
</div>
<div class="flex justifySpaceBetween marBottom32">
  <div class="modal__inputWrap marRight32">
    <label>Medication Name</label>
    <div class="styledSelect marBottom32">
      <select class="styledSelect__select" [(ngModel)]="selectedMedication">
        <option *ngFor="let medication of medications" [value]="medication.id">{{medication.name}}</option>
      </select>
    </div>
  </div>
  <div class="modal__inputWrap140">
    <label>Dose</label>
    <div class="flex alignCenter">
      <div class="modal__inputWrap100 marRight8">
        <input type="number" class="input fullWidth" min="0" [(ngModel)]="doseMg" />
      </div>
      mg
    </div>
  </div>
</div>
<div class="flex justifySpaceBetween marBottom32">
  <div class="modal__inputWrap marRight32">
    <label>Started</label>
    <div class="datepicker">
      <div class="datepicker__date datepicker__date--fullWidth" (click)="showDate=!showDate">
        Select Date
      </div>
      <app-date-picker class="datepicker__picker" [ngClass]="{ 'isOpen' : showDate }" [(selected)]="datePrescribed"></app-date-picker>
    </div>
  </div>
  <div class="modal__inputWrap140 marRight32">
    <label>Length</label>
    <div class="flex alignCenter">
      <div class="modal__inputWrap100 marRight8">
        <input type="number" class="input fullWidth" min="0" [(ngModel)]="durationDays" />
      </div>
      days
    </div>
  </div>
  <!-- <div class="modal__inputWrap100">
    <label>Refills</label>
    <input type="number" class="input fullWidth" min="0" />
  </div> -->
</div>
<label>Prescribing Practitioner</label>
<div class="styledSelect marBottom32">
  <select class="styledSelect__select" [(ngModel)]="prescribingPractitioner">
    <option *ngFor="let teamMember of careTeamMembers" [value]="teamMember.employee_profile.id">{{teamMember.employee_profile.user.first_name}} {{teamMember.employee_profile.user.last_name}}<span *ngIf="teamMember.employee_profile.title">, {{teamMember.employee_profile.title.abbreviation}}</span></option>
  </select>
</div>
<label>Instructions (opt)</label>
<textarea class="input input--textarea" [(ngModel)]="instructions"></textarea>

<div class="divider"></div>
<div class="edit-details">
  <div class="flex justifySpaceBetween marBottom32">
    <div class="modal__inputWrap marRight32">
      <label>Starts on Day</label>
      <input type="text" class="input fullWidth" type="number" min="0" [(ngModel)]="startDay" />
    </div>
    <div class="modal__inputWrap">
      <label>Frequency</label>
      <div class="styledSelect fullWidth">
        <select class="styledSelect__select" [(ngModel)]="frequency">
          <option *ngFor="let option of frequencyOptions" [value]="option.value">{{option.displayName}}</option>
        </select>
      </div>
    </div>
  </div>
  <label *ngIf="frequency !== 'once'">
    Repeats
    <div class="flex">
      <label class="styledInput marRight48">
        <input type="radio" class="styledInput__input" name="radioPDM" [value]="'plan_end'" [(ngModel)]="repeatsChoice" />
        <span class="styledInput__radio"></span> Until Plan Ends
      </label>
      <label class="styledInput">
        <input type="radio" class="styledInput__input" name="radioPDM" [value]="'other'" [(ngModel)]="repeatsChoice" />
        <span class="styledInput__radio"></span>
        <div class="modal__inputWrap80 marRight8">
          <input type="number" class="input fullWidth" min="0" [(ngModel)]="repeatAmount" />
        </div>
        times
      </label>
    </div>
  </label>
  <div class="flex justifySpaceBetween marBottom32">
    <div class="modal__inputWrap marRight32">
      <label>Appear Time</label>
			<app-time-picker (valueChange)="appearTime = $event;"></app-time-picker>
    </div>
    <div class="modal__inputWrap">
      <label>Due Time</label>
			<app-time-picker (valueChange)="dueTime = $event;"></app-time-picker>
    </div>
  </div>
</div>

<div class="modal__buttons modal__buttons--marBottom48">
  <button class="button button--2nd" (click)="clickCancel()">
    Cancel
  </button>
  <button class="button" [disabled]="saveDisabled()" (click)="clickSave()">
    Save
  </button>
</div>
