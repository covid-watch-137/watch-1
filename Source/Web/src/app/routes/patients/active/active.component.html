<div class="ssContainer ssContents">
  <div class="flex alignCenter marBottom32">
    <h1 class="noMargin">Active Patients ({{activePatients.length}})</h1>
    <div class="tool__anchor">
      <button class="button button--icon button--icon--small"
      (click)="toolAP1Open=!toolAP1Open">
        <i class="ss-help"></i>
      </button>
      <div class="tool__tip tool__tip--bottom" [ngClass]="{ 'isOpen' : toolAP1Open }">
        <div class="tool__text">
          Active patients have created an account and have a current care plan.
        </div>
      </div>
    </div>
  </div> <!--/.flex (for title and tooltip)-->

  <h2>Filter Results</h2>
  <div class="flex marBottom48">
    <div class="marRight32">
      <!--TODO: If the user only has access to one facility, hide this filter-->
      <label>User</label>
      <div class="drop">
          <div class="drop__input" (click)="multi1Open=!multi1Open">
            All
          </div>
          <ul class="drop__dropdown" [ngClass]="{ 'isOpen' : multi1Open }">
            <div class="drop__buttons">
              <button class="button button--iconText">
                <i class="ss-check ss-standard"></i> Check All
              </button>
              <button class="button button--iconText">
                <i class="ss-ban"></i> Uncheck All
              </button>
            </div>

            <li class="drop__option">
              <input class="input input--search drop__innerInput" type="text" placeholder="Search" />
            </li>

            <li class="drop__option">
              <label class="drop__checkbox styledInput">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                <div class="picName">
                  <img class="picName__img" src="../../../assets/img/profile.svg" />Phillip Tornelli
                </div>
              </label>
            </li>

            <li class="drop__option">
              <label class="drop__checkbox styledInput">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                <div class="picName">
                  <img class="picName__img" src="../../../assets/img/profile.svg" />Stephanie Wintergreen
                </div>
              </label>
            </li>

          </ul>
        </div>
    </div> <!--/ container for facility filter-->

    <div class="marRight32">
      <label>Care Plan Type</label>
      <div class="drop">
          <div class="drop__input" (click)="multi2Open = !multi2Open">
            All
          </div>
          <ul class="drop__dropdown" [ngClass]="{ 'isOpen' : multi2Open }">
            <div class="drop__buttons">
              <button class="button button--iconText">
                <i class="ss-check ss-standard"></i> Check All
              </button>
              <button class="button button--iconText">
                <i class="ss-ban"></i> Uncheck All
              </button>
            </div>

            <li class="drop__option">
              <input class="input input--search drop__innerInput" type="text" placeholder="Search" />
            </li>

            <li class="drop__option">
              <label class="drop__checkbox styledInput"
              title="Behavioral Health Initiative">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                <i class="drop__icon drop__icon--first icomoon-bhi"></i>
                BHI
              </label>
            </li>
            <li class="drop__option">
              <label class="drop__checkbox styledInput"
              title="Chronic Care Management">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                <i class="drop__icon drop__icon--first ss-heart"></i>
                CCM
              </label>
            </li>
            <li class="drop__option">
              <label class="drop__checkbox styledInput"
              title="Complex Chronic Care Management">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                <i class="drop__icon drop__icon--first ss-addheart"></i>
                CCCM
              </label>
            </li>
            <li class="drop__option">
              <label class="drop__checkbox styledInput"
              title="Psychiatric Collaborative Care Management">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                <i class="drop__icon drop__icon--first icomoon-cocm"></i>
                CoCM
              </label>
            </li>
            <li class="drop__option">
              <label class="drop__checkbox styledInput"
              title="Remote Patient Monitoring">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                <i class="drop__icon drop__icon--first ss-satellitedish"></i>
                RPM
              </label>
            </li>
            <li class="drop__option">
              <label class="drop__checkbox styledInput"
              title="Transitional Care Management">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                <i class="drop__icon drop__icon--first ss-signpost"></i>
                TCM
              </label>
            </li>
          </ul>
        </div>
    </div> <!--/ container for care plan type filter-->

    <div>
      <label>Care Plan Name</label>
      <div class="drop">
          <div class="drop__input" (click)="multi3Open = !multi3Open">
            All
          </div>
          <ul class="drop__dropdown" [ngClass]="{ 'isOpen' : multi3Open }">
            <div class="drop__buttons">
              <button class="button button--iconText">
                <i class="ss-check ss-standard"></i> Check All
              </button>
              <button class="button button--iconText">
                <i class="ss-ban"></i> Uncheck All
              </button>
            </div>

            <li class="drop__option">
              <input class="input input--search drop__innerInput" type="text" placeholder="Search" />
            </li>

            <li class="drop__option">
              <label class="drop__checkbox styledInput"
              title="Behavioral Health Initiative">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                Anxiety
              </label>
            </li>
            <li class="drop__option">
              <label class="drop__checkbox styledInput"
              title="Chronic Care Management">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                Depression
              </label>
            </li>
            <li class="drop__option">
              <label class="drop__checkbox styledInput"
              title="Complex Chronic Care Management">
                <input type="checkbox" class="styledInput__input" />
                <span class="styledInput__box"></span>
                Heart Disease
              </label>
            </li>
          </ul>
        </div>
    </div> <!--/ container for care plan name filter-->
  </div> <!--/.flex (for filters)-->

  <h2>Statistics (Past 30 Days)</h2>
  <div class="info info--horiz">
    <div class="info__cell">
      <label>Active Patients</label>
      {{activePatients.length}}
    </div>
    <div class="info__cell">
      <label>Facilities</label>
      5
    </div>
    <div class="info__cell">
      <label>Avg Time</label>
      <div class="pill pill--yellow">
        :54
      </div>
    </div>
    <div class="info__cell">
      <label>Avg Engagement</label>
      <div class="pill pill--yellow">
        87%
      </div>
    </div>
    <div class="info__cell">
      <label>Avg Outcome</label>
      <div class="pill pill--lime">
        90%
      </div>
    </div>
    <div class="info__cell">
      <label>Avg Risk Level</label>
      <div class="pill pill--yellow">
        Low Risk 89%
      </div>
    </div>
  </div> <!--/.info-->

  <div class="accordion" [ngClass]="{ 'isOpen' : accordionsOpen[facility.name] }" *ngFor="let facility of uniqueFacilities()">
    <div class="accordion__head" (click)="accordionsOpen[facility.name]=!accordionsOpen[facility.name]">
      <span class="accordion__title">{{facility.name}} ({{getPatientsForFacility(facility).length}})</span>
      <div class="accordion__right">
        <div class="pill pill--yellow marRight16">
          Time 26:57
        </div>
        <div class="pill pill--yellow">
          Low Risk 84%
        </div>
        <div class="accordion__arrow">
          <i class="ss-standard ss-navigateright"></i>
        </div>
      </div>
    </div> <!--/.accordion__head-->
    <div class="accordion__body">
      <div class="accordion__contents">
        <div class="tableWrap fullWidth">
          <table class="fullWidth">
            <thead>
              <tr>
                <th class="thSortable">
                  <span class="thSortable__text thSortable__text--left">Patient</span>
                </th>
                <th class="thSortable">
                  <span class="thSortable__text thSortable__text--left">Care Plan</span>
                </th>
                <th class="thSortable">
                  <div class="tool">
                    <span class="thSortable__text">Also</span>
                    <div class="tool__anchor">
                      <button class="button button--icon button--icon--small" (click)="tooltip2Open=!tooltip2Open">
                        <i class="ss-help"></i>
                      </button>
                      <div class="tool__tip tool__tip--bottom" [ngClass]="{ 'isOpen' : tooltip2Open }">
                        <div class="tool__text">This is the number of additional care plans a patient has. Click the number for details.</div>
                      </div>
                    </div>
                  </div>
                </th>
                <th class="thSortable">
                  <span class="thSortable__text">Monthly Time</span>
                </th>
                <th class="thSortable">
                  <span class="thSortable__text">My Tasks Today</span>
                </th>
                <th class="thSortable">
                  <span class="thSortable__text">Progress</span>
                </th>
                <th class="thSortable">
                  <span class="thSortable__text">Engagement</span>
                </th>
                <th class="thSortable">
                  <span class="thSortable__text">Outcomes</span>
                </th>
                <th class="thSortable thSortable--sortDown">
                  <span class="thSortable__text">Risk Level</span>
                </th>
                <th class="noPad"></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let patient of getPatientsForFacility(facility)">
                <td class="left hideOverflow">
                  <a class="picName" (click)="routeToPatient(patient)">
                    <img class="picName__img" [src]="patient.user.image_url" *ngIf="patient.user.image_url" />
                    <img class="picName__img" src="../../../assets/img/profile.svg" *ngIf="!patient.user.image_url" />
                    {{patient.user.first_name}} {{patient.user.last_name}}
                  </a>
                </td>
                <td>
                  <div class="iconText">
                    <i class="iconText__icon ss-addheart"></i> Heart Disease
                  </div>
                </td>
                <td>
                  <a class="tool__anchor justifyCenter" (click)="tooltip1Open=!tooltip1Open">
                    1
                    <div class="tool__tip tool__tip--bottom" [ngClass]="{ 'isOpen' : tooltip1Open }">
                      <div class="iconText iconText--white iconText--autoHeight marBottom8">
                        <i class="iconText__icon iconText__icon--noTop icomoon-cocm"></i> Anxiety
                      </div>
                    </div>
                  </a>
                </td>
                <td><div class="pill pill--purple">:14</div>
                </td>
                <td>
                  <!--TODO: Clicking this link should also open the My Tasks accordion on the patient details page-->
                  <a [routerLink]="['/patient/asdf/details']" class="justifyCenter">4</a>
                </td>
                <td>Ongoing</td>
                <td><div class="pill pill--red">54%</div></td>
                <td><div class="pill pill--yellow">73%</div></td>
                <td><div class="pill pill--red">Med Risk 65%</div></td>
                <td class="noPad">
                  <button class="button button--center button--icon button--icon--small"
                  (click)="confirmRemovePatient()">
                    <i class="ss-delete"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td class="left hideOverflow">
                  <a href="" class="picName">
                    <img class="picName__img" src="../../../assets/img/profile.svg" />
                    Montgomery Alexander
                  </a>
                </td>
                <td>
                  <div class="iconText">
                    <i class="iconText__icon iconText__icon--noTop icomoon-cocm"></i> Anxiety
                  </div>
                </td>
                <td>
                  <a class="tool__anchor justifyCenter" (click)="tooltip3Open=!tooltip3Open">
                    1
                    <div class="tool__tip tool__tip--bottom" [ngClass]="{ 'isOpen' : tooltip3Open }">
                      <div class="iconText iconText--white iconText--autoHeight">
                        <i class="iconText__icon ss-addheart"></i> Heart Disease
                      </div>
                    </div>
                  </a>
                </td>
                <td><div class="pill pill--lime">1:01</div>
                </td>
                <td>
                  <!--TODO: Clicking this link should also open the My Tasks accordion on the patient details page-->
                  <a [routerLink]="['/patient/asdf/details']" class="justifyCenter">1</a>
                </td>
                <td>
                  <div class="progress">
                    Week 8 of 12
                    <div class="progress__bg">
                      <div class="progress__bar"></div>
                    </div>
                  </div>
                </td>
                <td><div class="pill pill--lime">91%</div></td>
                <td><div class="pill pill--yellow">77%</div></td>
                <td><div class="pill pill--yellow">Low Risk 75%</div></td>
                <td class="noPad">
                  <button class="button button--center button--icon button--icon--small"
                  (click)="confirmRemovePatient()">
                    <i class="ss-delete"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
          <div class="paginationWrap">
            <button class="button button--iconText"
            (click)="addPatientToPlan()">
              <i class="ss-plus"></i> Add Patient
            </button>
            <div class="pagination">
                <button class="button button--icon button--icon--dis">
                    <i class="ss-standard ss-skipback"></i>
                </button>
                <button class="button button--icon button--icon--dis">
                    <i class="ss-standard ss-directleft"></i>
                </button>
                <span>235 of 588</span>
                <button class="button button--icon">
                    <i class="ss-standard ss-directright"></i>
                </button>
                <button class="button button--icon">
                    <i class="ss-standard ss-skipforward"></i>
                </button>
            </div> <!--/.pagination-->
          </div> <!--/.paginationWrap-->
        </div> <!--/.tableWrap-->
      </div> <!--/.accordion__contents-->
    </div> <!--/.accordion__body-->
  </div> <!--/.accordion-->

  <!-- <div class="accordion" [ngClass]="{ 'isOpen' : accord2Open }">
      <div class="accordion__head" (click)="accord2Open=!accord2Open">
        <span class="accordion__title">South County Regional (0)</span>
        <div class="accordion__right">
          <div class="accordion__arrow">
            <i class="ss-standard ss-navigateright"></i>
          </div>
        </div>
      </div>
      <div class="accordion__body">
        <div class="accordion__contents">
          <h2 class="center">No patients have been added to this facility.</h2>
          <button class="button button--center button--iconText"
          (click)="addPatientToPlan()">
            <i class="ss-plus"></i> Add Patient
          </button>
        </div>
      </div>
    </div> --> <!--/.accordion-->

</div> <!--/.ssContainer-->
